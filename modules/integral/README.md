# Architecture

    //          
    //                                 ++
    //          +----------------+     ||               +----------------+
    //          | Task Scheduler |     ||               | Task Scheduler |
    //          +----------------+     ||               +----------------+
    //          | REP            |     ||               | REP            |
    //          +----------------+     ||               +----------------+
    //                                 ||
    //                  ^              ||                        ^
    //                  |              ||                        |
    //                  |              ||        +---------------------------------+
    //                  |              ||        |               |                 |
    //                  |              ||        v               v                 v
    //                  v              ||
    //                                 ||   +---------+      +---------+     +---------+
    //           +---------------+     ||   |  REQ    |      |  REQ    |     |  REQ    |
    //           | REQ           |     ||   +---------+      +---------+     +---------+
    //           +---------------+     ||   |  Worker |      |  Worker |     |  Worker |
    //           | Task Creator  |     ||   +---------+      +---------+     +---------+
    //           +---------------+     ||   |  PUSH   |      |  PUSH   |     |  PUSH   |
    //                                 ||   +---------+      +---------+     +---------+
    //                                 ||
    //                                 ||       +                +                +
    //                                 ||       |                |                |
    //                                 ||       +---------------------------------+
    //                                 ||                        |
    //                                 ||                        v
    //                                 ||
    //                                 ||                  +-----------+
    //                                 ||                  | PULL      |
    //                                 ||                  +-----------+
    //                                 ||                  | Collector |
    //                                 ||                  +-----------+
    //                                 ++
    //          


#Â State flow

    //    Task Sheduler                                   Worker                                   Collector
    //    +-------------------------------------------------+                                              +
    //    | Bind                                    Connect |                                              |
    //    +-------------------------------------------------+                                              |
    //    |                                                 |                                              |
    //    |                                    connect,tcp  |                                              |
    //    | <-----------------------------------------------+                                              |
    //    | reply,state, worker_id, collector_adr           |                                              |
    //    +-----------------------------------------------> |                                              |
    //    |                if state != ao_integrals, exit 1 |                                              |
    //    |                                                 +----------------------------------------------+
    //    |                                                 | Connect                                 Bind |
    //    |                                                 +----------------------------------------------+
    //    |                                                 +                                              |
    //    |                                         --  WHILE TRUE --                                      |
    //    |                                                 +                                              |
    //    |                       get task, state,worker_id |                                              |
    //    |  <----------------------------------------------+                                              |
    //    |  reply,task_id, s1, s2, s3, s4                  |                                              |
    //    |-----------------------------------------------> |                                              |
    //    |                                                 +                                              |
    //    |                                       if (reply == terminate) break:                           |
    //    |                                       else Compute task:                                       |
    //    |                                                 +                                              |
    //    |              task_done,state,worker_id,state_id |                                              |
    //    | <-----------------------------------------------+                                              |
    //    |  reply, state                                   |                                              |
    //    +-----------------------------------------------> |                                              |
    //    |                                                 | n_integral, buffer_i, buffer_^alue, task_id  |
    //    |                                                 +--------------------------------------------> |
    //    |                                                 +                                              |
    //    |                                         -- END WHILE --                                        |
    //    |                                                 +                                              |
    //    |                                                 | 0,0,0,0,0                                    |
    //    |                                                 +--------------------------------------------> |
    //    |                      disconnect,state,worker_id |                                              |
    //    | <-----------------------------------------------+                                              |
    //    | reply, state                                    |                                              |
    //    +-----------------------------------------------> |                                              |
    //    |                                                 |                                              |
    //    |                                                 |                                              |
    //    |                                                 |                                              |
    //    +------------------------------------------------------------------------------------------------+
    //    |                                Disconnect/Close | Disconnect/Close                             |
    //    +-------------------------------------------------+----------------------------------------------+
    //  
